
## 正则表达式

本文的正则表达式实例主要基于 java 语言。

正则表达式用于文本内容的查找和替换，它本身不是一种语言或者软件。

[正则表达式在线工具](https://regexr.com/)

### 语法

- |：x|y 匹配 x 或 y。
- ^：匹配输入字符串开始的位置。(例：^[0-9]*$ 匹配只含数字的字符串)
- $：匹配输入字符串结尾的位置。
- .：匹配除"\r\n"之外的任何单个字符。若要匹配包括"\r\n"在内的任意字符，请使用诸如"[\s\S]"之类的模式。
- *：零次或多次匹配前面的字符或子表达式。例如，zo* 匹配"z"和"zoo"。* 等效于 {0,}。
- +：一次或多次匹配前面的字符或子表达式。例如，"zo+"与"zo"和"zoo"匹配，但与"z"不匹配。+ 等效于 {1,}。
- ?：零次或一次匹配前面的字符或子表达式。例如，"do(es)?"匹配"do"或"does"中的"do"。? 等效于 {0,1}。
- {n}：n 是非负整数。正好匹配 n 次。例如，"o{2}"与"Bob"中的"o"不匹配，但与"food"中的两个"o"匹配。
- {n,}：n 是非负整数。至少匹配 n 次。例如，"o{2,}"不匹配"Bob"中的"o"，而匹配"foooood"中的所有 o。"o{1,}"等效于"o+"。"o{0,}"等效于"o*"。
- {n,m}：m 和 n 是非负整数，其中 n < = m。匹配至少 n 次，至多 m 次。例如，"o{1,3}"匹配"fooooood"中的头三个 o。'o{0,1}' 等效于 'o?'。注意：您不能将空格插入逗号和数字之间。
- ()：定义一个子表达式。子表达式的内容可以当成一个独立元素，即可以将它看成一个字符。
- []：定义一个字符集合。0-9、a-z 定义了一个字符区间，- 只有在 [] 之间才是元字符，在 [] 之外就是一个普通字符。^ 在 [] 中是取非操作。
- \：将下一字符标记为特殊字符、文本、反向引用或八进制转义符。- 
- \b：匹配一个字边界，即字与空格间的位置。例如，"er\b"匹配"never"中的"er"，但不匹配"verb"中的"er"。
- \B：非字边界匹配。"er\B"匹配"verb"中的"er"，但不匹配"never"中的"er"。
- \d：数字字符匹配。等效于 [0-9]。
- \D：非数字字符匹配。等效于 [^0-9]。
- \f：换页符匹配。等效于 \x0c 和 \cL。
- \n：换行符匹配。等效于 \x0a 和 \cJ。
- \r：匹配一个回车符。等效于 \x0d 和 \cM。
- \s：匹配任何空白字符，包括空格、制表符、换页符等。与 [ \f\n\r\t\v] 等效。
- \S：匹配任何非空白字符。与 [^ \f\n\r\t\v] 等效。
- \t：制表符匹配。与 \x09 和 \cI 等效。
- \v：垂直制表符匹配。与 \x0b 和 \cK 等效。
- \w：匹配任何字类字符，包括下划线。与"[A-Za-z0-9_]"等效。

### 正则表达式合集

#### 校验数字

1. 数字：^[0-9]*$
2. n 位的数字：^\d{n}$
3. 至少 n 位的数字：^\d{n,}$
4. m-n 位的数字：^\d{m,n}$
5. 零和非零开头的数字：^(0|[1-9][0-9]*)$
6. 非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]{1,2})?$
7. 带 1-2 位小数的正数或负数：^(\-)?\d+(\.\d{1,2})?$
8. 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$
9. 有两位小数的正实数：^[0-9]+(.[0-9]{2})?$
10. 有 1~3 位小数的正实数：^[0-9]+(.[0-9]{1,3})?$
11. 非零的正整数：^[1-9]\d*$
12. 非零的负整数：^\-[1-9][]0-9"*$
13. 非负整数：^\d+$
14. 非正整数：^-[1-9]\d*|0$
15. 非负浮点数：^\d+(\.\d+)?$
16. 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$
17. 正浮点数：^[1-9]d.d|0.d[1-9]d$
18. 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$
19. 浮点数：^(-?\d+)(\.\d+)?$

### 效验字符

1. 汉字：^[\u4e00-\u9fa5]{0,}$
2. 英文和数字：^[A-Za-z0-9]+$
3. 长度为 3-20 的所有字符：^.{3,20}$
4. 由 26 个英文字母组成的字符串：^[A-Za-z]+$
5. 由 26 个大写英文字母组成的字符串：^[A-Z]+$
6. 由 26 个小写英文字母组成的字符串：^[a-z]+$
7. 由数字和 26 个英文字母组成的字符串：^[A-Za-z0-9]+$
8. 由数字、26 个英文字母或者下划线组成的字符串：^\w+$
9. 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$
10. 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$
11. 可以输入含有 ^%&',;=?$\" 等字符：[^%&',;=?$\x22]+
12. 禁止输入含有 ~ 的字符：[^~\x22]+

### 其它

1. Email 地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$
2. 身份证号 (15 位）：^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$
3. 身份证号码 (18 位)：^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$
4. 帐号是否合法 (字母开头，允许 5-16 字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$
5. 密码 (以字母开头，长度在 6~18 之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w{5,17}$
6. 强密码 (必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-16 之间)：^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$
7. 日期格式：^\d{4}-\d{1,2}-\d{1,2}
8.  一年的 12 个月 (01～09 和 1～12)：^(0?[1-9]|1[0-2])$
9.  一个月的 31 天 (01～09 和 1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$
10. xml 文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$
11. 中文字符的正则表达式：[\u4e00-\u9fa5]
12. 双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度 (一个双字节字符长度计 2，ASCII 字符计 1))
13. 空白行的正则表达式：\n\s*\r (可以用来删除空白行)
14. 首尾空白字符的正则表达式：^\s*|\s*$或 (^\s*)|(\s*$) (可以用来删除行首行尾的空白字符 (包括空格、制表符、换页符等等)，非常有用的表达式)
15. 腾讯 QQ 号：[1-9][0-9]{4,11} (腾讯 QQ 号从 10000 开始)
16. 中国邮政编码：[1-9]\d{5}(?!\d) (中国邮政编码为 6 位数字)
17. IP-v4 地址：\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b (提取 IP 地址时有用)
18. 校验 IP-v6 地址:(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))
19. 子网掩码：((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))
20. 校验日期:^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$(“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。)
21. 抽取注释：<!--(.*?)-->
22. 查找 CSS 属性:^\\s*[a-zA-Z\\-]+\\s*[:]{1}\\s[a-zA-Z0-9\\s.#]+[;]{1}
23. 提取页面超链接:(<a\\s*(?!.*\\brel = )[^>]*)(href ="https?:\\/\\/)((?!(?:(?:www\\.)?'.implode('|(?:www\\.)?', $follow_list).'))[^"]+)"((?!.*\\brel = )[^>]*)(?:[^>]*)>
24. 提取网页图片:\\< *[img][^\\\\>]*[src] *= *[\\"\\']{0,1}([^\\"\\'\\ >]*)
25. 提取网页颜色代码:^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
26. 文件扩展名效验:^([a-zA-Z]\\:|\\\\)\\\\([^\\\\]+\\\\)*[^\\/:*?"<>|]+\\.txt(l)?$
27. 判断 IE 版本：^.*MSIE [5-8](?:\\.[0-9]+)?(?!.*Trident\\/[5-9]\\.0).*$

